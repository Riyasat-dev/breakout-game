<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Breakout Game</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #121212;
        font-family: Arial, sans-serif;
        overflow: hidden;
        cursor: none;
      }

      .grid {
        position: absolute;
        top: 50px;
        left: 0;
        right: 0;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        padding: 0 20px;
      }

      .grid div {
        width: 80px;
        height: 30px;
        background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
      }

      .grid div.remove {
        opacity: 0;
        transform: scale(0);
        pointer-events: none;
      }

      .ball {
        position: absolute;
        width: 20px;
        height: 20px;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 0 10px #4fc3f7;
      }

      .paddle {
        position: absolute;
        width: 100px;
        height: 15px;
        background: #4fc3f7;
        border-radius: 8px;
        bottom: 30px;
        box-shadow: 0 0 10px #4fc3f7;
      }

      #playButton {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 12px 30px;
        font-size: 18px;
        background: linear-gradient(135deg, #4fc3f7, #2196f3);
        color: white;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        transition: all 0.3s ease;
      }

      #playButton:hover {
        transform: translate(-50%, -50%) scale(1.05);
        box-shadow: 0 6px 20px rgba(33, 150, 243, 0.6);
      }

      #playButton:active {
        transform: translate(-50%, -50%) scale(0.98);
      }
    </style>
  </head>
  <body>
    <div class="grid"></div>
    <div class="ball"></div>
    <div class="paddle"></div>
    <button id="playButton">Play</button>

    <script>
      // DOM Elements
      const grid = document.querySelector(".grid");
      const ball = document.querySelector(".ball");
      const paddle = document.querySelector(".paddle");
      const playButton = document.getElementById("playButton");

      // Game State
      let ballDirectionX = 1;
      let ballDirectionY = 1;
      let blocks = [];
      let gameStarted = false;
      let gameInterval;
      let ballSpeed = 5;
      let paddleSpeed = 12;

      // Initialize game elements
      function initGame() {
        // Position ball and paddle
        ball.style.left = `${window.innerWidth / 2 - 10}px`;
        ball.style.top = `${window.innerHeight / 2 - 10}px`;
        paddle.style.left = `${window.innerWidth / 2 - 50}px`;

        // Create blocks
        grid.innerHTML = "";
        blocks = [];

        const colors = ["#ff6b6b", "#ffa502", "#2ed573", "#1e90ff", "#a55eea"];

        for (let i = 0; i < 50; i++) {
          const block = document.createElement("div");
          block.style.background = colors[i % colors.length];
          grid.appendChild(block);
          blocks.push(block);
        }
      }

      // Reset ball position
      function resetBall() {
        ball.style.left = `${window.innerWidth / 2 - 10}px`;
        ball.style.top = `${window.innerHeight / 2 - 10}px`;
        ballDirectionX = Math.random() > 0.5 ? 1 : -1; // Random initial direction
        ballDirectionY = 1;
      }

      // Move the ball
      function moveBall() {
        const ballRect = ball.getBoundingClientRect();
        const newX = ballRect.left + ballSpeed * ballDirectionX;
        const newY = ballRect.top + ballSpeed * ballDirectionY;

        ball.style.left = `${newX}px`;
        ball.style.top = `${newY}px`;
      }

      // Check for collisions with walls
      function checkWallCollision() {
        const ballRect = ball.getBoundingClientRect();

        // Left and right walls
        if (ballRect.left <= 0 || ballRect.right >= window.innerWidth) {
          ballDirectionX *= -1;
        }

        // Top wall
        if (ballRect.top <= 0) {
          ballDirectionY *= -1;
        }

        // Bottom wall (game over)
        if (ballRect.bottom >= window.innerHeight) {
          endGame(false);
        }
      }

      // Check for collisions with blocks
      function checkBlockCollisions() {
        const ballRect = ball.getBoundingClientRect();
        let blocksRemoved = 0;

        blocks.forEach((block) => {
          if (block.classList.contains("remove")) {
            blocksRemoved++;
            return;
          }

          const blockRect = block.getBoundingClientRect();

          if (
            ballRect.left < blockRect.right &&
            ballRect.right > blockRect.left &&
            ballRect.top < blockRect.bottom &&
            ballRect.bottom > blockRect.top
          ) {
            block.classList.add("remove");
            ballDirectionY *= -1;

            // Check if all blocks are removed
            if (blocksRemoved === blocks.length - 1) {
              endGame(true);
            }
          }
        });
      }

      // Check for collision with paddle
      function checkPaddleCollision() {
        const ballRect = ball.getBoundingClientRect();
        const paddleRect = paddle.getBoundingClientRect();

        if (
          ballRect.left < paddleRect.right &&
          ballRect.right > paddleRect.left &&
          ballRect.bottom > paddleRect.top &&
          ballRect.top < paddleRect.bottom
        ) {
          // Calculate bounce angle based on where ball hits paddle
          const hitPosition =
            ballRect.left +
            ballRect.width / 2 -
            (paddleRect.left + paddleRect.width / 2);
          const normalizedHit = hitPosition / (paddleRect.width / 2);

          ballDirectionX = normalizedHit * 1.5; // More dynamic bounce
          ballDirectionY = -1;

          // Limit the maximum angle
          const maxAngle = 1.5;
          if (Math.abs(ballDirectionX) > maxAngle) {
            ballDirectionX = ballDirectionX > 0 ? maxAngle : -maxAngle;
          }
        }
      }

      // Move paddle with mouse
      function movePaddle(e) {
        if (!gameStarted) return;

        const paddleWidth = parseInt(getComputedStyle(paddle).width);
        let newPosition = e.clientX - paddleWidth / 2;

        // Keep paddle within screen bounds
        newPosition = Math.max(
          0,
          Math.min(newPosition, window.innerWidth - paddleWidth)
        );

        paddle.style.left = `${newPosition}px`;
      }

      // End the game
      function endGame(isWin) {
        clearInterval(gameInterval);
        gameStarted = false;
        alert(isWin ? "You Win! ðŸŽ‰" : "Game Over! ðŸ˜¢");
        initGame();
        playButton.style.display = "block";
      }

      // Main game loop
      function gameLoop() {
        moveBall();
        checkWallCollision();
        checkBlockCollisions();
        checkPaddleCollision();
      }

      // Start the game
      function startGame() {
        if (gameStarted) return;

        playButton.style.display = "none";
        gameStarted = true;
        resetBall();
        gameInterval = setInterval(gameLoop, 20);
      }

      // Event listeners
      playButton.addEventListener("click", startGame);
      document.addEventListener("mousemove", movePaddle);

      // Initialize game on load
      window.addEventListener("load", initGame);

      // Handle window resize
      window.addEventListener("resize", function () {
        if (!gameStarted) {
          initGame();
        }
      });
    </script>
  </body>
</html>
